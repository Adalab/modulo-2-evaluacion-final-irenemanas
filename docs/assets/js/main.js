"use strict";let shows=[],favourites=[];const inputElement=document.querySelector(".js-input"),buttonElement=document.querySelector(".js-button");function getDataFromApi(){fetch("http://api.tvmaze.com/search/shows?q="+inputElement.value).then(t=>t.json()).then(t=>{shows=t,paintShows()})}function handleSearch(){getDataFromApi()}function setInLocalStorage(){const t=JSON.stringify(favourites);localStorage.setItem("data",t)}function getFromLocalStorage(){const t=localStorage.getItem("data");if(null===t)favourites=[];else{const e=JSON.parse(t);favourites=e,paintFavourites()}}buttonElement.addEventListener("click",handleSearch);const defaultImg="https://via.placeholder.com/210x295/ffffff/666666/?";function paintShows(){let t="";for(const e of shows){const s=e.show;favourites.findIndex(t=>t.show.id===s.id)>=0?(t+=`<li class="show show-favourite js-show" id="${s.id}">`,t+=`<h2 class="show-favourite__title">${s.name}</h2>`):(t+=`<li class="show js-show" id="${s.id}">`,t+=`<h2 class="show__title">${s.name}</h2>`);const o=s.image;t+=null===o?`<img src="${defaultImg}" class="show__image">`:`<img src="${o.medium}" class="show__image" alt="Cartel Serie"></img>`,t+="</li>"}document.querySelector(".js-shows-list").innerHTML=t,listenShowEvents()}function listenShowEvents(){const t=document.querySelectorAll(".js-show");for(const e of t)e.addEventListener("click",handleFavourite)}function handleFavourite(t){const e=parseInt(t.currentTarget.id),s=shows.findIndex(t=>t.show.id===e),o=favourites.findIndex(t=>t.show.id===e);-1===o?favourites.push(shows[s]):favourites.splice(o,1),paintFavourites(),paintShows(),setInLocalStorage()}function paintFavourites(){let t="";for(const e of favourites){const s=e.show;t+=`<li class="favourite js-favourite" id="${s.id}">`,t+=`<h2 class="favourite__title">${s.name}</h2>`;const o=s.image;t+=null===o?`<img src="${defaultImg}">`:`<img src="${o.medium}" class="favourite__image" alt="Cartel Serie"></img>`,t+="</li>"}document.querySelector(".js-favourites-list").innerHTML=t}getFromLocalStorage();